import{a as O,b as T,c as k,d as N,e as V,f as q,j as F,k as W,m as j}from"./chunk-RL2VMBAB.js";import{a as A}from"./chunk-3X2PE6MI.js";import{D as p,J as d,K as r,L as n,P as C,Q as M,R as h,S as c,U as s,W as y,Y as v,Z as x,_ as b,ka as S,la as L,n as u,na as P,o as f,pa as E,sa as I,w as a,y as _,z as w}from"./chunk-DZCWRMDA.js";function D(e,t){e&1&&(r(0,"span"),s(1,"Email is required."),n())}function H(e,t){e&1&&(r(0,"span"),s(1,"Please enter a valid email address."),n())}function R(e,t){if(e&1&&(r(0,"div",13),p(1,D,2,0,"span",14)(2,H,2,0,"span",14),n()),e&2){h();let i=c(10);a(),d("ngIf",i.errors==null?null:i.errors.required),a(),d("ngIf",i.errors==null?null:i.errors.email)}}function B(e,t){e&1&&(r(0,"span"),s(1,"Password is required."),n())}function G(e,t){if(e&1&&(r(0,"div",13),p(1,B,2,0,"span",14),n()),e&2){h();let i=c(16);a(),d("ngIf",i.errors==null?null:i.errors.required)}}function Y(e,t){if(e&1&&(r(0,"div",13),s(1),n()),e&2){let i=h();a(),y(" ",i.error," ")}}var z=class e{constructor(t,i,l){this.router=t;this.http=i;this.authService=l}credentials={email:"",password:""};error="";onSubmit(){this.http.post("https://dummyjson.com/auth/login",{username:this.credentials.email,password:this.credentials.password}).subscribe({next:t=>{console.log("Login response:",t),t&&t.token?(this.authService.setToken(t.token),console.log("authToken after login:",localStorage.getItem("authToken")),this.router.navigate(["/"])):(this.error="Login failed: No token received",console.error("Login failed: No token received",t))},error:t=>{this.error=t?.error?.message||"Invalid email or password",console.error("Login error:",t)}})}static \u0275fac=function(i){return new(i||e)(_(I),_(P),_(A))};static \u0275cmp=w({type:e,selectors:[["app-login"]],decls:21,vars:6,consts:[["loginForm","ngForm"],["email","ngModel"],["password","ngModel"],[1,"auth-container"],[1,"auth-card"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","email","",1,"input",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","name","password","required","",1,"input",3,"ngModelChange","ngModel"],["type","submit",1,"button","primary",3,"disabled"],[1,"error-message"],[4,"ngIf"]],template:function(i,l){if(i&1){let g=C();r(0,"div",3)(1,"div",4)(2,"h2"),s(3,"Login to MealsApp"),n(),r(4,"form",5,0),M("ngSubmit",function(){return u(g),f(l.onSubmit())}),r(6,"div",6)(7,"label",7),s(8,"Email"),n(),r(9,"input",8,1),b("ngModelChange",function(o){return u(g),x(l.credentials.email,o)||(l.credentials.email=o),f(o)}),n(),p(11,R,3,2,"div",9),n(),r(12,"div",6)(13,"label",10),s(14,"Password"),n(),r(15,"input",11,2),b("ngModelChange",function(o){return u(g),x(l.credentials.password,o)||(l.credentials.password=o),f(o)}),n(),p(17,G,2,1,"div",9),n(),p(18,Y,2,1,"div",9),r(19,"button",12),s(20,"Login"),n()()()()}if(i&2){let g=c(5),m=c(10),o=c(16);a(9),v("ngModel",l.credentials.email),a(2),d("ngIf",m.invalid&&(m.dirty||m.touched)),a(4),v("ngModel",l.credentials.password),a(2),d("ngIf",o.invalid&&(o.dirty||o.touched)),a(),d("ngIf",l.error),a(),d("disabled",!g.form.valid)}},dependencies:[j,q,O,T,k,F,W,V,N,L,S,E],styles:[".auth-container[_ngcontent-%COMP%]{min-height:calc(100vh - 180px);display:flex;align-items:center;justify-content:center;padding:40px 20px}.auth-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:8px;box-shadow:0 4px 6px #0000001a;width:100%;max-width:400px}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:30px;text-align:center;font-size:1.75rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#4a5568;font-weight:500}.input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #e2e8f0;border-radius:4px;font-size:1rem;transition:all .3s ease}.input[_ngcontent-%COMP%]:focus{outline:none;border-color:#67b26f;box-shadow:0 0 0 3px #67b26f1a}.button[_ngcontent-%COMP%]{width:100%;padding:12px;background:#67b26f;color:#fff;border:none;border-radius:4px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.button[_ngcontent-%COMP%]:hover:not(:disabled){background:#4caf50;transform:translateY(-2px)}.button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{color:#e53e3e;text-align:center;margin-bottom:15px;font-size:.9rem}"]})};export{z as Login};
